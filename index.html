<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agenda Quincho - Centro Asturiano ğŸ‡¦ğŸ‡·</title>
  <style>
    :root {
      --azul-primario: #1e3a8a;
      --azul-gradiente: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
      --amarillo: #f59e0b;
      --blanco: #ffffff;
      --gris-fondo: #f1f5f9;
      --rojo: #ef4444;
      --verde: #10b981;
    }
    
    body { font-family: 'Segoe UI', sans-serif; background: var(--gris-fondo); color: #334155; margin: 0; padding: 0; }
    
    /* Header */
    .header-main {
      background: var(--azul-gradiente); color: white; padding: 30px 20px;
      text-align: center; border-bottom-left-radius: 30px; border-bottom-right-radius: 30px;
    }
    .header-logo img { width: 80px; height: 80px; border-radius: 50%; border: 3px solid var(--amarillo); margin-bottom: 10px; }

    .container { max-width: 700px; margin: -30px auto 40px; padding: 0 20px; }
    .card { background: white; border-radius: 20px; padding: 25px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); }

    /* Forms */
    .form-group { margin-bottom: 15px; }
    label { display: block; font-weight: 600; color: var(--azul-primario); margin-bottom: 5px; font-size: 0.9rem; }
    input, select { 
      width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 10px; 
      font-size: 16px; box-sizing: border-box; background: #f8fafc;
    }
    .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
    .grid-invitados { display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 10px; }

    /* Botones */
    button { 
      background: var(--azul-gradiente); color: white; border: none; padding: 15px; 
      border-radius: 12px; font-weight: 700; cursor: pointer; width: 100%; margin-top: 10px;
    }
    .btn-volver { background: #94a3b8; margin-top: 5px; padding: 10px; }
    .btn-confirmar { background: var(--verde); font-size: 1.1rem; }

    /* Modales */
    .modal { 
      display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; 
      background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(5px); align-items: center; justify-content: center;
    }
    .modal.activa { display: flex; }
    .modal-content { background: white; padding: 30px; border-radius: 20px; width: 90%; max-width: 500px; }

    /* Alertas */
    .item-detalle { display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #f1f5f9; }
    .total-box { background: #eff6ff; border: 2px dashed var(--azul-primario); padding: 15px; border-radius: 15px; text-align: center; margin: 15px 0; }
    .bonus { color: var(--verde); font-weight: bold; }
  </style>
</head>
<body>

  <div class="header-main">
    <div class="header-logo"><img src="https://i.ibb.co/q3d6Ktzm/logo-centro-asturiano2.png"></div>
    <h1>ğŸ¡ Agenda Quincho</h1>
    <p>Centro Asturiano de Buenos Aires ğŸ‡¦ğŸ‡·</p>
  </div>

  <div id="modalValidacion" class="modal activa">
    <div class="modal-content" style="text-align: center;">
      <img src="https://i.ibb.co/q3d6Ktzm/logo-centro-asturiano2.png" style="width:70px;">
      <h2 style="color:var(--azul-primario)">Â¡Bienvenido! ğŸ‘‹</h2>
      <div class="form-group" style="text-align: left;">
        <label>NÂ° de Socio</label>
        <input type="number" id="numSocio" placeholder="Ej: 12345">
      </div>
      <div class="form-group" style="text-align: left;">
        <label>Fecha de Nacimiento</label>
        <input type="text" id="fechaNac" placeholder="DD/MM/AAAA" oninput="mascaraFecha(this)">
      </div>
      <button onclick="validarSocio()">ğŸš€ Ingresar</button>
    </div>
  </div>

  <div class="container">
    <div id="app" class="card" style="display:none;">
      <button class="btn-volver" onclick="location.reload()">â¬…ï¸ Volver / Salir</button>
      <hr style="margin:20px 0; border:0; border-top:1px solid #eee;">

      <div class="form-group">
        <label>âœ¨ Tipo de Evento</label>
        <select id="tipoQuincho" onchange="calcularTotal()">
          <option value="">Seleccione...</option>
          <option value="cerrado">ğŸª Quincho Cerrado (Max 60 pers.)</option>
          <option value="parrilla">ğŸ”¥ Parrillas Externas</option>
        </select>
      </div>

      <div class="grid-2">
        <div class="form-group">
          <label>ğŸ“… Fecha</label>
          <input type="text" id="fechaEvento" placeholder="DD/MM/AAAA" oninput="mascaraFecha(this); calcularTotal();">
        </div>
        <div class="form-group">
          <label>ğŸ‘¥ Total Invitados</label>
          <input type="number" id="totalInvitados" readonly style="background:#e2e8f0">
        </div>
      </div>

      <div class="grid-2">
        <div class="form-group">
          <label>ğŸ•’ Inicio</label>
          <input type="text" id="horaInicio" placeholder="HH:MM" oninput="mascaraHora(this); calcularTotal();">
        </div>
        <div class="form-group">
          <label>ğŸ•’ Fin</label>
          <input type="text" id="horaFin" placeholder="HH:MM" oninput="mascaraHora(this); calcularTotal();">
        </div>
      </div>

      <h3 style="font-size: 1rem; color: var(--azul-primario);">ğŸ‘¥ Detalle por edad:</h3>
      <div class="grid-invitados">
        <div class="form-group"><label>Mayores</label><input type="number" id="may" value="0" min="0" oninput="calcularTotal()"></div>
        <div class="form-group"><label>Jubilados</label><input type="number" id="jub" value="0" min="0" oninput="calcularTotal()"></div>
        <div class="form-group"><label>Juveniles</label><input type="number" id="juv" value="0" min="0" oninput="calcularTotal()"></div>
        <div class="form-group"><label>Menores</label><input type="number" id="men" value="0" min="0" oninput="calcularTotal()"></div>
        <div class="form-group"><label>Infantiles</label><input type="number" id="inf" value="0" min="0" oninput="calcularTotal()"></div>
      </div>

      <div style="background:#f8fafc; padding:15px; border-radius:12px; margin-top:10px;">
        <label style="display:flex; align-items:center; gap:10px; cursor:pointer; margin-bottom:10px;">
          <input type="checkbox" id="inflable" onchange="alertaInflable(this); calcularTotal();"> ğŸˆ Trae Inflable (+$20.000)
        </label>
        <label style="display:flex; align-items:center; gap:10px; cursor:pointer;">
          <input type="checkbox" id="cumple" onchange="alertaCumple(this); calcularTotal();"> ğŸ‰ Socio CumpleaÃ±ero (BonificaciÃ³n)
        </label>
      </div>

      <div class="total-box">
        <div style="font-size:0.9rem; color:#64748b">Monto Total Estimado</div>
        <div style="font-size:1.8rem; font-weight:800; color:var(--azul-primario)">ARS $<span id="montoVisual">0</span></div>
      </div>

      <button class="btn-confirmar" id="btnConfirmar" disabled onclick="abrirConfirmacion()">ğŸ“ Revisar y Guardar</button>
    </div>
  </div>

  <div id="modalFinal" class="modal">
    <div class="modal-content">
      <h2 style="text-align:center; color:var(--azul-primario)">ğŸ“‹ Detalle Final</h2>
      <div id="desgloseFinal"></div>
      
      <div style="background:#f1f5f9; padding:15px; border-radius:12px; font-size:0.85rem; margin-top:15px;">
        <p><strong>ğŸ¦ Banco Galicia</strong><br>CBU: 0070004720000001084140<br>Alias: CENTRO.ASTURIANO.BA</p>
      </div>

      <div class="grid-2" style="margin-top:15px;">
        <button onclick="cerrarModal('modalFinal')" style="background:#94a3b8">Editar</button>
        <button onclick="alert('âœ… Â¡Agenda Guardada! EnvÃ­e el comprobante.')" style="background:var(--verde)">ğŸ’¾ Confirmar</button>
      </div>
    </div>
  </div>

  <script>
    // MÃ¡scaras automÃ¡ticas
    function mascaraFecha(i) {
      let v = i.value.replace(/\D/g,'');
      if (v.length > 2) v = v.substring(0,2) + '/' + v.substring(2);
      if (v.length > 5) v = v.substring(0,5) + '/' + v.substring(5,9);
      i.value = v;
    }

    function mascaraHora(i) {
      let v = i.value.replace(/\D/g,'');
      if (v.length > 2) v = v.substring(0,2) + ':' + v.substring(2,4);
      i.value = v;
    }

    // Alertas especÃ­ficas
    function alertaInflable(cb) {
      if(cb.checked) alert("ğŸˆ AVISO INFLABLE:\n\nEn los casos que se desea traer inflable se tendria que abonar locacion $20.000, previo al evento debera enviar la ART y/o seguro de accidentes personales con clÃ¡usula de no repeticiÃ³n a nombre del CENTRO ASTURIANO DE BUENOS AIRES Cuit: 30-54586286-3.");
    }

    function alertaCumple(cb) {
      if(cb.checked) alert("ğŸ‰ AVISO CUMPLEAÃ‘ERO:\n\nEs un beneficio unico para el socio cumpleaÃ±ero para ser uso por unica vez desde la fecha de nacimiento hasta 30 dias corridos.");
    }

    function validarSocio() {
      // SimulaciÃ³n de validaciÃ³n
      document.getElementById('modalValidacion').classList.remove('activa');
      document.getElementById('app').style.display = 'block';
    }

    function calcularTotal() {
      const hFin = document.getElementById('horaFin').value;
      const m = parseInt(document.getElementById('may').value) || 0;
      const j = parseInt(document.getElementById('jub').value) || 0;
      const v = parseInt(document.getElementById('juv').value) || 0;
      const n = parseInt(document.getElementById('men').value) || 0;
      const i = parseInt(document.getElementById('inf').value) || 0;
      
      const totalInvitados = m+j+v+n+i;
      document.getElementById('totalInvitados').value = totalInvitados;

      // Tarifas base (Simplificadas)
      let total = (m * 7700) + (j * 4900) + (v * 5500) + (n * 4000);
      
      // LÃ³gica Seguridad Nocturna
      if (hFin.includes(':')) {
        let [hh, mm] = hFin.split(':').map(Number);
        let totalMinutos = (hh * 60) + mm;
        // Si la hora es entre 00:10 (10 min) y 05:00 (300 min)
        if (totalMinutos >= 10 && totalMinutos <= 300) {
          total += 20000;
          if (!window.seguridadAlertado) {
            alert("ğŸ‘® SEGURIDAD:\nPara reuniones pasadas las 00:00hs se tiene que abonar la seguridad correspondiente a 5 horas ($20.000).");
            window.seguridadAlertado = true;
          }
        } else { window.seguridadAlertado = false; }
      }

      if (document.getElementById('inflable').checked) total += 20000;
      
      // BonificaciÃ³n cumpleaÃ±ero (Descuenta 1 mayor)
      if (document.getElementById('cumple').checked && m > 0) total -= 7700;

      document.getElementById('montoVisual').innerText = total.toLocaleString('es-AR');
      document.getElementById('btnConfirmar').disabled = (totalInvitados === 0);
    }

    function abrirConfirmacion() {
      const may = parseInt(document.getElementById('may').value);
      const cumpleCheck = document.getElementById('cumple').checked;
      const segChecked = window.seguridadAlertado;

      let html = `
        <div class="item-detalle"><span>ğŸ“… Fecha:</span> <span>${document.getElementById('fechaEvento').value}</span></div>
        <div class="item-detalle"><span>ğŸ•’ Horario:</span> <span>${document.getElementById('horaInicio').value} - ${document.getElementById('horaFin').value}</span></div>
        <div class="item-detalle"><span>Mayores:</span> <span>${may}</span></div>
        <div class="item-detalle"><span>Inflable:</span> <span>${document.getElementById('inflable').checked ? '$20.000' : '$0'}</span></div>
        <div class="item-detalle"><span>Seguridad Noct.:</span> <span>${segChecked ? '$20.000' : '$0'}</span></div>
      `;

      if(cumpleCheck) {
        html += `<div class="item-detalle bonus"><span>ğŸ BonificaciÃ³n Cumple:</span> <span>- $7.700</span></div>`;
      }

      html += `<div class="total-box"><b style="color:var(--azul-primario)">TOTAL FINAL: ARS $${document.getElementById('montoVisual').innerText}</b></div>`;

      document.getElementById('desgloseFinal').innerHTML = html;
      document.getElementById('modalFinal').classList.add('activa');
    }

    function cerrarModal(id) { document.getElementById(id).classList.remove('activa'); }
  </script>
</body>
</html>
